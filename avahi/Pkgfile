# Description: A system which facilitates service discovery on a local network via the mDNS/DNS-SD protocol suite
# URL: http://www.avahi.org/
# Maintainer: crux libreoffice team, tbier at posteo dot de
# Packager: Matt Housh, jaeger at crux dot ninja
# Depends on: libdaemon dbus gobject-introspection intltool

name=avahi
version=0.7
release=1
source=(http://avahi.org/download/$name-$version.tar.gz \
  avahi-daemon.rc)

build() {
  cd $name-$version
  ./configure --prefix=/usr \
    --with-distro=none \
    --disable-gtk \
    --disable-gtk3 \
    --disable-qt3 \
    --disable-qt4 \
    --disable-pygobject \
    --disable-python-dbus \
    --disable-mono \
    --disable-monodoc \
    --disable-nls \
    --enable-compat-libdns_sd
  make
  make DESTDIR=$PKG install
  rm -r $PKG/usr/share/locale

  ln -s avahi-compat-libdns_sd/dns_sd.h $PKG/usr/include/dns_sd.h
  install -D -m 0755 $SRC/avahi-daemon.rc $PKG/etc/rc.d/avahi-daemon
}
