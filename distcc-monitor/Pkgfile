# Description: A graphical monitor for distcc.
# URL: http://distcc.org/
# Maintainer: Tim Biermann, tbier at posteo dot de
# Contributor: Danny Rawlins, crux at romster dot me
# Packager: Johannes Winkelmann, jw at tks6 dot net
# Depends on: distcc gtk


name=distcc-monitor
version=3.3.2
release=1
source=(https://github.com/distcc/distcc/releases/download/v$version/distcc-$version.tar.gz)

build() {
	cd distcc
    ./autogen.sh
	./configure \
		--prefix=/usr \
		--disable-nls \
		--with-gtk

	make distccmon-gnome
	make distccmon-gnome DESTDIR=$PKG install

	rm -r $PKG/usr/etc $PKG/usr/bin/{lsdistcc,pump}
	rm -r $PKG/usr/{share/doc/,share/man,lib/python3.6,sbin/update-distcc-symlinks,bin/distcc{,d,mon-text}}
}
