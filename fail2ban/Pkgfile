# Description: Bans IP that makes too many password failures.
# URL: http://www.fail2ban.org/
# Maintainer: Tim Biermann, tbier at posteo dot de
# Contributor: Danny Rawlins, crux at romster dot me
# Packager: Jose V Beneyto, sepen at crux dot nu
# Depends on: python3

name=fail2ban
version=0.10.4
release=2
source=(https://github.com/fail2ban/$name/archive/$version/$name-$version.tar.gz
fail2ban.rc)

build() {
  cd $name-$version
  ./fail2ban-2to3
  python3 setup.py install --root=$PKG --prefix=/usr
  python3 -mcompileall $PKG

  install -m 0750 -D $SRC/fail2ban.rc $PKG/etc/rc.d/fail2ban
  find $PKG \(\
    -iname "*README*" \
    \) -exec rm '{}' \+
}
