# Description: A library for configuring and customizing font access, with Ubuntu patches
# URL:         https://www.freedesktop.org/wiki/Software/fontconfig/
# Maintainer: Tim Biermann <tim_biermann@web.de>
# Depends on: 

name=fontconfig
version=2.12.6
release=2
source=(https://fontconfig.org/release/$name-$version.tar.bz2 https://launchpad.net/ubuntu/+archive/primary/+files/fontconfig_$version-0ubuntu1.debian.tar.xz)

build() {

    cd $name-$version

    for _f in $(cat ../debian/patches/series); do
        patch -Np1 -i "../debian/patches/$_f"
    done

     ./configure --prefix=/usr \
                 --sysconfdir=/etc \
                 --localstatedir=/var \
                 --with-xmldir=/etc/fonts \
                 --with-templatedir=/etc/fonts/conf.avail

    make
    make DESTDIR=$PKG install

    # Enabling autohinting by default
    pushd $PKG/etc/fonts/conf.d
    ln -sf /etc/fonts/conf.avail/10-autohint.conf
    popd

    rm -f $PKG/etc/fonts/conf.d/README
    rm -r $PKG/usr/share/doc
}
