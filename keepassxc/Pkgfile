# Description: KeePass Cross-Platform Community Edition
# URL: https://keepassxc.org/
# Maintainer: Tim Biermann <tim_biermann@web.de>
# Depends on: qt5 libgcrypt yubico-c yubikey-personalization libgpg-error llvm

name=keepassxc
version=2.2.4
release=1
source=(https://github.com/keepassxreboot/keepassxc/releases/download/$version/$name-$version-src.tar.xz)

build() {
	cd $name-$version
	cmake -DCMAKE_INSTALL_PREFIX=/usr \
        	-DCMAKE_INSTALL_BINDIR=/usr/bin \
        	-DCMAKE_INSTALL_LIBDIR=/usr/lib \
        	-DCMAKE_VERBOSE_MAKEFILE=OFF \
        	-DWITH_GUI_TESTS=OFF \
        	-DWITH_XC_AUTOTYPE=ON \
        	-DWITH_XC_HTTP=ON \
        	-DWITH_XC_YUBIKEY=ON \
        	-DWITH_XC_SSHAGENT=ON \
        	-DCMAKE_BUILD_TYPE=Release
	make
	make DESTDIR=$PKG install
	rm -fr $PKG/usr/share/keepassxc/translations
}
