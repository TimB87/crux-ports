# Description: Tiny, lightning fast, feature-packed file manager
# URL: https://github.com/jarun/nnn
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: ncurses readline
# Optional: patool mediainfo

name=nnn
version=2.4
release=2
source=(https://github.com/jarun/nnn/releases/download/v$version/$name-v$version.tar.gz fix_blockage.patch)

build() {
  cd $name
  patch -Np1 -i $SRC/fix_blockage.patch
  sed -i 's/install: all/install:/' Makefile
  make
  make DESTDIR=$PKG PREFIX=/usr install
  if [ -e /lib/zsh ]; then
    install -Dm644 scripts/auto-completion/zsh/_nnn $PKG/usr/share/zsh/site-functions/_nnn
  fi
  if [ -e /bin/bash ]; then
    install -Dm644 scripts/auto-completion/bash/nnn-completion.bash $PKG/usr/share/bash-completion/completions/nnn
  fi
}
