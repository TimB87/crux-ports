# Description: Simple http server class
# URL: https://metacpan.org/pod/HTTP::Daemon
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: p5-http-date p5-http-message p5-lwp-mediatypes

name=p5-http-daemon
version=6.01
release=1
source=(https://cpan.metacpan.org/authors/id/G/GA/GAAS/HTTP-Daemon-$version.tar.gz
HTTP-Daemon-6.01-Add-IPv6-support.patch
HTTP-Daemon-6.01-Handle-undef-and-empty-LocalAddr.patch)

build() {
  cd HTTP-Daemon-$version
  patch -p1 < ../HTTP-Daemon-6.01-Add-IPv6-support.patch
  patch -p1 < ../HTTP-Daemon-6.01-Handle-undef-and-empty-LocalAddr.patch
  perl Makefile.PL INSTALLDIRS=vendor
  make
  make DESTDIR=$PKG install
  find $PKG \( -name '.packlist' -o -name '*.pod' \) -delete
}
