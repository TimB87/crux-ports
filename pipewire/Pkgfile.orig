# Description: Server and user space API to deal with multimedia pipelines
# URL: https://pipewire.org
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: v4l-utils fdk-aac ffmpeg x264 x265 alsa-lib dbus glib gnutls gst-plugins-base gstreamer lame libffi libidn libogg libtasn1 libtheora libva libvorbis libvpx libwebp nettle opus orc p11-kit sbc libdrm libvdpau xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxext xorg-libxfixes

name=pipewire
version=0.1.9
release=1
source=(https://github.com/PipeWire/pipewire/archive/$version/$name-$version.tar.gz unhide-providers.diff)

build() {
	cd $name-$version
    patch -Np1 -i ../unhide-providers.diff
    mkdir build && cd build
    
    meson -D enable_gstreamer=true \
            -D prefix=/usr ..
    ninja
    
    DESTDIR=$PKG ninja install
}
