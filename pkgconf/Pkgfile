# Description: A system for managing library compile/link flags.
# URL: https://git.sr.ht/~kaniini/pkgconf
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: meson ninja

name=pkgconf
version=1.7.3
release=1
source=(https://distfiles.dereferenced.org/pkgconf/$name-$version.tar.xz
  i686-pc-linux-gnu.personality x86_64-pc-linux-gnu.personality)

build() {
  meson $name-$version build \
    --prefix=/usr \
    -Dtests=false
  ninja -C build
  DESTDIR=$PKG ninja -C build install

  install -Dt "$PKG/usr/share/pkgconfig/personality.d" -m644 \
    i686-pc-linux-gnu.personality \
    x86_64-pc-linux-gnu.personality
  ln -s pkgconf "$PKG/usr/bin/i686-pc-linux-gnu-pkg-config"
  ln -s pkgconf "$PKG/usr/bin/x86_64-pc-linux-gnu-pkg-config"
  ln -s pkgconf "$PKG/usr/bin/pkg-config"

  rm -rf $PKG/usr/share/doc
}
