# Description: simple terminal implementation for X
# URL: https://st.suckless.org/
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: graphite2 util-linux xorg-libxft xorg-libxext

name=st
version=0.8.2
release=4
source=(https://dl.suckless.org/st/$name-$version.tar.gz combined_st-0.8.2.diff st.desktop)

build (){
    cd "$name-$version"
    patch -Np1 -i $SRC/combined_st-0.8.2.diff
    make CC=gcc
    make DESTDIR=$PKG PREFIX=/usr TERMINFO=$PKG/usr/share/terminfo install
    # Remove duplicates of files from ncurses
    rm -f $PKG/usr/share/terminfo/s/{st,st-256color}
    install -d $PKG/usr/share/applications
    install -m644 $SRC/st.desktop $PKG/usr/share/applications/st.desktop
}
